Ink.createModule("Ink.UI.Animate",1,["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1"],function(n,t,i){"use strict";function o(){n.BaseUIComponent.apply(this,arguments)}var e=function(n){return"animationName"in n.style?"animation":"webkitAnimationName"in n.style?"webkitAnimation":null}(document.createElement("div")),a={animation:"animationend",webkitAnimation:"webkitAnimationEnd"}[e];return o._name="Animate_1",o._optionDefinition={trigger:["Element",null],duration:["String","slow"],animation:["String"],removeClass:["Boolean",!0],onEnd:["Function",function(){}]},o.prototype._init=function(){isNaN(parseInt(this._options.duration,10))||(this._options.duration=parseInt(this._options.duration,10)),this._options.trigger?t.observe(this._options.trigger,"click",Ink.bind(function(){this.animate()},this)):this.animate()},o.prototype.animate=function(){o.animate(this._element,this._options.animation,this._options)},Ink.extendObj(o,{_animationPrefix:e,animationSupported:!!e,animationEndEventName:a,animate:function(t,r,m){function s(n){n.target===t&&n.animationName===r&&(m.onEnd&&m.onEnd(n),m.removeClass&&i.removeClassName(t,r),"string"==typeof m.duration&&i.removeClassName(t,m.duration),t.removeEventListener(a,s,!1))}return t=n.elOrSelector(t),"number"==typeof m||"string"==typeof m?m={duration:m}:m||(m={}),"function"==typeof arguments[3]&&(m.onEnd=arguments[3]),"number"!=typeof m.duration&&"string"!=typeof m.duration&&(m.duration=400),o.animationSupported?("number"==typeof m.duration?t.style[e+"Duration"]=m.duration+"ms":"string"==typeof m.duration&&i.addClassName(t,m.duration),i.addClassName(t,["animated",r]),void t.addEventListener(a,s,!1)):void(m.onEnd&&setTimeout(function(){m.onEnd(null)},0))}}),n.createUIComponent(o),o});